<!DOCTYPE html> 
<html> 
<head> 
    <title>Your RESTful advisor</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="public/stylesheets/styles.less" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="/javascripts/jqm-config.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>
    <script src="http://underscorejs.org/underscore-min.js"></script>
    <script src="http://backbonejs.org/backbone-min.js"></script>
    <script src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js"></script>
    <script src="/javascripts/handlebars-helpers.js"></script>
    <script src="/javascripts/jquery-cookie.js"></script>
    <script src="/javascripts/app.js"></script>

</head> 
<body> 

    <div data-role="page" id="eventsPage">
            <div data-role="header">
                <h1>
                    <img class="logo" src="http://www.residentadvisor.net/images/hdr/ra_on.png"/>
                </h1>
            </div>
            <div data-role="content">
            </div>
            <div data-role="footer" class="footer">
                <h6>This is a hack by <a href="http://twitter.com/codazzo">codazzo</a></h6>
                <h6>Copyright Â© 2012 <a href="http://www.residentadvisor.net/">Resident Advisor Ltd.</a></h6>
            </div>
    </div>

    <div data-role="page" id="eventPage">
            <div data-role="header">
                <a class="goback" data-icon="back">Back</a>
                <h1 class="title"></h1>
            </div>
            <div data-role="content">
            </div>
    </div>

    <div data-role="page" id="locationsPage">
            <div data-role="header">
                <a class="goback" data-icon="back">Back</a>
                <h1 class="title">Choose your location</h1>
            </div>
            <div data-role="content">
            </div>
    </div>
    <div data-role="page" id="datesPage">
            <div data-role="header">
                <a class="goback" data-icon="back">Back</a>
                <h1 class="title">Choose a date</h1>
            </div>
            <div data-role="content">
            </div>
    </div>

    <div data-role="page" id="djPage">
            <div data-role="header">
                <a class="goback" data-icon="back">Back</a>
                <h1 class="title"></h1>
            </div>
            <div data-role="content">
            </div>
    </div>


    <script id="events-template" type="text/x-handlebars-template">            
        Here's what's happening in
        <a href="#/locations" data-rel="dialog" data-role="button" data-mini="true" data-inline="true">
            <img class="countryIcon" src="{{location.img}}" />
            {{location.name}}
        </a>
        {{#if isTonight}}
            tonight,
        {{else}}
            on
        {{/if}}
        <a href="#/dates" data-role="button" data-mini="true" data-inline="true">{{date}}</a>

        <ul class="listView" data-role="listview" data-inset="true">
            {{#each events}}
                <li class="eventLi">
                    <a href="#/event/{{this.id}}" data-transition="pop">
                        <img class="ui-li-thumb ui-corner-tl" src="{{this.img}}" />
                        <h3 class="ui-li-heading">{{this.title}}</h3>
                        <p class="ui-li-desc">{{this.venue}}</p>
                        <span class="ilb ui-li-count">{{this.ppl}}</span>
                    </a>
                </li>
            {{/each}}
        </ul>    
    </script>

    <script id="event-template" type="text/x-handlebars-template">
        {{#if img}}
            <img class="eventImg" src="{{img}}" />
        {{/if}}
        <ul class=".nobullets">
            <li>
                <span class="key">Venue</span>: {{venue}}
            </li>
            <li><span class="key">Address</span>: {{address}} (<a href="http://maps.google.com/maps?q={{address}}">map</a>)
            </li>
            <li><span class="key">Date</span>: {{date}}</li>
            <li><span class="key">Time</span>: {{time}}</li>
        </ul>
        <hr/>
            {{#key_value extraInfo}}
                <b>{{key}}</b>
                <div>{{{value}}}</div>
                <br/>
            {{/key_value}}
            <hr/>
            {{{extraStrings}}}
    </script>

    <script id="locations-template" type="text/x-handlebars-template">
            <div class="ui-grid-a oneline">
                <div class="ui-block-a">
                    <label>Country:</label>
                </div>
                <select class="ui-block-b" id="countrySelect">
                    {{#each regions}}
                        <option
                            {{#ifequal this.name ../currentCountry }}
                                selected="selected"
                            {{/ifequal}}
                            data-img = "{{img}}"
                        >
                            {{this.name}}
                        </option>
                    {{/each}}
                </select>
            </div>
            <div class="ui-grid-a oneline">
                <div class="ui-block-a">
                    <label>City:</label>
                </div>
                <select class="ui-block-b" id="regionSelect">
                    {{#each countryRegions}}
                        <option
                            {{#ifequal this.name ../currentRegion }}
                                selected="selected"
                            {{/ifequal}}
                            data-id = "{{this.id}}"
                            data-name="{{this.name}}"
                        >
                            {{this.name}}
                        </option>
                    {{/each}}
                </select>
            </div>

        <fieldset class="ui-grid-a">
                <div class="ui-block-a"><a href="#" type="submit" data-theme="d">Cancel</a></div>
                <div class="ui-block-b"><button id="locationSubmit" type="submit" data-theme="b">Submit</button></div>
        </fieldset>
        <!--
        <div class="locationsList" data-role="collapsible-set" data-inset="false">
            {{#each regions}}
                <div data-role="collapsible" data-theme="b" class="regionLi">
                    <h2>
                        <img class="countryIcon" src="{{this.img}}" />
                        {{this.name}}
                    </h2>
                    <ul class="regionContent" data-role="listview">
                    {{#each this.regions}}
                        <li class="region">
                            <a href="#"
                                data-id = "{{this.id}}"
                                data-country = "{{../name}}"
                                data-name="{{this.name}}"
                                data-img = "{{../img}}"
                                class="location">
                                    {{this.name}}
                            </a>
                        </li>
                    {{/each}}
                    </ul>
                </div>
            {{/each}}
        </div>
        -->
    </script>

    <script id="dates-template" type="text/x-handlebars-template">
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup" data-type="horizontal"> 
                <label for="select-choice-day">Day</label>
                <select data-mini="true" name="select-choice-day" id="select-choice-day">
                    <option class="null">Day</option>
                    {{#each days}}
                        <option value="{{this}}"
                            {{#ifequal ../selectedDate.day this }}
                                selected="selected"
                            {{/ifequal}}
                        >{{this}}</option>
                    {{/each}}
                </select>

                <label for="select-choice-month">Month</label>
                <select data-mini="true" name="select-choice-month" id="select-choice-month">
                    <option class="null">Month</option>
                    {{#each_with_index months}}
                        <option value="{{this}}"
                            {{#ifequal ../selectedDate.month index }}
                                selected="selected"
                            {{/ifequal}}
                        >{{this.data}}</option>
                    {{/each_with_index}}
                </select>
            
            
                <label for="select-choice-year">Year</label>
                <select data-mini="true" name="select-choice-year" id="select-choice-year">
                    <option class="null">Year</option>
                    {{#each years}}
                        <option value="{{this}}"
                            {{#ifequal ../selectedDate.year this }}
                                selected="selected"
                            {{/ifequal}}
                        >{{this}}</option>
                    {{/each}}
                </select>
            </fieldset>
        </div>
        or
        <div>
            <a id="tonight"  data-mini="true" data-icon="arrow-r" data-role="button" data-inline="true">Tonight</a>
        </div>
        <fieldset class="ui-grid-a">
            <div class="ui-block-a"><button type="submit" id="datecancel" data-icon="delete" data-theme="d">Cancel</button></div>
            <div class="ui-block-b"><button type="submit" id="dateok" data-icon="check" data-theme="b">Submit</button></div>
        </fieldset>
    </script>

    <script id="dj-template" type="text/x-handlebars-template">
        <h2>{{name}}</h2>
        {{#if img}}
            <div><img class="eventImg" src="{{img}}" /></div>
        {{/if}}
        <ul>
            {{#key_value links}}
                <li><a href="http://{{value}}">{{key}}</a></li>
            {{/key_value}}
        </ul>
    </script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-36554785-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

</body>
</html>
